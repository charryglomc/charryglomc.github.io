!function(){function u(e,o){if("string"==typeof o){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;if(t)for(;e;){if(t.bind(e)(o))return e;e=e.parentElement}return!1}for(;e;){if(e==o)return e;e=e.parentElement}return!1}window.needShareButton=function(e,o){var t,s=this;for(t in s.elem=e||"need-share-button",s.getTitle=function(){var e;return document.querySelector&&(e=document.querySelector("title"))?e.innerText:document.title},s.getImage=function(){var e;return document.querySelector&&(e=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))?e.getAttribute("content"):""},s.getDescription=function(){var e;return document.querySelector?(e=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?e.getAttribute("content"):"":(e=document.getElementsByTagName("meta").namedItem("description"))?e.getAttribute("content"):""},s.share={weibo:function(e){e=l(e),e="http://v.t.sina.com.cn/share/share.php?title="+encodeURIComponent(e.title)+"&url="+encodeURIComponent(e.url)+"&pic="+encodeURIComponent(e.image);s.popup(e)},wechat:function(e){var o=l(e),o="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+encodeURIComponent(o.url),e=e.querySelector(".need-share-button_dropdown"),t=e.getElementsByClassName("need-share-wechat-code-image")[0];t?t.remove():((t=document.createElement("img")).src=o,t.alt="loading wechat image...",t.setAttribute("class","need-share-wechat-code-image"),"middleRight"==s.options.position?e.insertBefore(t,e.children[0]):e.appendChild(t))},douban:function(e){e=l(e),e="https://www.douban.com/share/service?name="+encodeURIComponent(e.title)+"&href="+encodeURIComponent(e.url)+"&image="+encodeURIComponent(e.image);s.popup(e)},qqzone:function(e){e=l(e),e="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(e.title)+"&url="+encodeURIComponent(e.url)+"&pics="+encodeURIComponent(e.image)+"&desc="+encodeURIComponent(e.description);s.popup(e)},renren:function(e){e=l(e),e="http://widget.renren.com/dialog/share?title="+encodeURIComponent(e.title)+"&resourceUrl="+encodeURIComponent(e.url)+"&pic="+encodeURIComponent(e.image)+"&description="+encodeURIComponent(e.description);s.popup(e)},mailto:function(e){e=l(e),e="mailto:?subject="+encodeURIComponent(e.title)+"&body=Thought you might enjoy reading this: "+encodeURIComponent(e.url)+" - "+encodeURIComponent(e.description);window.location.href=e},twitter:function(e){var e=l(e),o=e.protocol+"twitter.com/intent/tweet?text=";o+=encodeURIComponent(e.title)+"&url="+encodeURIComponent(e.url),s.popup(o)},pinterest:function(e){var e=l(e),o=e.protocol+"pinterest.com/pin/create/bookmarklet/?is_video=false",o=(o=(o+="&media="+encodeURIComponent(e.image))+("&url="+encodeURIComponent(e.url)))+("&description="+encodeURIComponent(e.title));s.popup(o)},facebook:function(e){var e=l(e),o=e.protocol+"www.facebook.com/share.php?",o=(o+="u="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title));s.popup(o)},googleplus:function(e){var e=l(e),o=e.protocol+"plus.google.com/share?";o+="url="+encodeURIComponent(e.url),s.popup(o)},reddit:function(e){var e=l(e),o=e.protocol+"www.reddit.com/submit?",o=(o+="url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title));s.popup(o)},delicious:function(e){var e=l(e),o=e.protocol+"del.icio.us/post?",o=(o=(o+="url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title)))+("&notes="+encodeURIComponent(e.description));s.popup(o)},stumbleupon:function(e){var e=l(e),o=e.protocol+"www.stumbleupon.com/submit?",o=(o+="url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title));s.popup(o)},linkedin:function(e){var e=l(e),o=e.protocol+"www.linkedin.com/shareArticle?mini=true",o=(o=(o+="&url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title)))+("&source="+encodeURIComponent(e.source));s.popup(o)},tumblr:function(e){var e=l(e),o=e.protocol+"www.tumblr.com/share?v=3",o=(o+="&u="+encodeURIComponent(e.url))+("&t="+encodeURIComponent(e.title));s.popup(o)},googlebookmarks:function(e){var e=l(e),o=e.protocol+"www.google.com/bookmarks/mark?op=edit",o=(o=(o+="&bkmk="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title)))+("&annotation="+encodeURIComponent(e.description));s.popup(o)},newsvine:function(e){var e=l(e),o=e.protocol+"www.newsvine.com/_tools/seed&save?",o=(o+="u="+encodeURIComponent(e.url))+("&h="+encodeURIComponent(e.title));s.popup(o)},evernote:function(e){var e=l(e),o=e.protocol+"www.evernote.com/clip.action?",o=(o+="url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title));s.popup(o)},friendfeed:function(e){var e=l(e),o=e.protocol+"www.friendfeed.com/share?",o=(o+="url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title));s.popup(o)},vkontakte:function(e){var e=l(e),o=e.protocol+"vkontakte.ru/share.php?",o=(o=(o=(o+="url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title)))+("&description="+encodeURIComponent(e.description)))+("&image="+encodeURIComponent(e.image));s.popup(o+="&noparse=true")},odnoklassniki:function(e){var e=l(e),o=e.protocol+"www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1",o=(o+="&st.comments="+encodeURIComponent(e.description))+("&st._surl="+encodeURIComponent(e.url));s.popup(o)},mailru:function(e){var e=l(e),o=e.protocol+"connect.mail.ru/share?",o=(o=(o=(o+="url="+encodeURIComponent(e.url))+("&title="+encodeURIComponent(e.title)))+("&description="+encodeURIComponent(e.description)))+("&imageurl="+encodeURIComponent(e.image));s.popup(o)}},s.popup=function(e){var o=void 0!==window.screenLeft?window.screenLeft:screen.left,t=void 0!==window.screenTop?window.screenTop:screen.top,n=window.innerWidth||document.documentElement.clientWidth||screen.width,r=window.innerHeight||document.documentElement.clientHeight||screen.height,e=window.open(e,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600, height=500, top="+(r/2-250+t)+", left="+(n/2-300+o));window.focus&&e.focus()},s.options={iconStyle:"default",boxForm:"horizontal",position:"bottomCenter",protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Pinterest,Facebook,GooglePlus,Reddit,Linkedin,Tumblr,Evernote"},o)o.hasOwnProperty(t)&&(s.options[t]=o[t]);function l(e){var o,t,n,r,i={};for(o in s.options)s.options.hasOwnProperty(o)&&(i[o]=s.options[o]);for(t in i.url=window.location.href,i.title=s.getTitle(),i.image=s.getImage(),i.description=s.getDescription(),e.dataset)!t.match(/share/)||(n=t.replace(/share/,"")).length&&(n=n.charAt(0).toLowerCase()+n.slice(1),r=e.dataset[t],"networks"===n?r=r.split(","):"url"===n&&r&&"/"===r[0]&&(r=location.origin+r),i[n]=r);return i}s.options.networks=s.options.networks.split(","),document.addEventListener("click",function(e){var o=document.querySelector(".need-share-button-opened");if(u(e.target,".need-share-button-opened"))setTimeout(function(){o.classList.remove("need-share-button-opened"),o.querySelector(".need-share-wechat-code-image")&&o.querySelector(".need-share-wechat-code-image").remove()},1);else if(o)o.classList.remove("need-share-button-opened"),o.querySelector(".need-share-wechat-code-image")&&o.querySelector(".need-share-wechat-code-image").remove();else{var t=u(e.target,s.elem);if(t&&!t.classList.contains("need-share-button-opened")){var n=t,r=document.createElement("span");if(r.className="need-share-button_dropdown",!n.querySelector(".need-share-button_dropdown")){var i,c,a,d=l(n),p=("default"==d.iconStyle&&"vertical"==d.boxForm?r.className+=" need-share-button_dropdown-box-vertical":"box"==d.iconStyle&&"horizontal"==d.boxForm?r.className+=" need-share-button_dropdown-box-horizontal":"box"==d.iconStyle&&"vertical"==d.boxForm&&(r.className+=" need-share-button_dropdown-box-vertical"),setTimeout(function(){switch(d.position){case"topLeft":r.className+=" need-share-button_dropdown-top-left";break;case"topRight":r.className+=" need-share-button_dropdown-top-right";break;case"topCenter":r.className+=" need-share-button_dropdown-top-center",r.style.marginLeft=-r.offsetWidth/2+"px";break;case"middleLeft":r.className+=" need-share-button_dropdown-middle-left",r.style.marginTop=-r.offsetHeight/2+"px";break;case"middleRight":r.className+=" need-share-button_dropdown-middle-right",r.style.marginTop=-r.offsetHeight/2+"px";break;case"bottomLeft":r.className+=" need-share-button_dropdown-bottom-left";break;case"bottomRight":r.className+=" need-share-button_dropdown-bottom-right";break;default:r.className+=" need-share-button_dropdown-bottom-center",r.style.marginLeft=-r.offsetWidth/2+"px"}},1),"default"==d.iconStyle?"need-share-button_link need-share-button_":"need-share-button_link-"+d.iconStyle+" need-share-button_link need-share-button_");for(c in d.networks)d.networks.hasOwnProperty(c)&&(i=document.createElement("span"),a=(c=d.networks[c].trim()).toLowerCase(),i.className=p+a,-1===["weibo","wechat","douban","qqzone","renren"].indexOf(a)?i.className+=" social-"+a:i.className+=" icon-"+a,i.dataset.network=a,i.title=c,r.appendChild(i));r.addEventListener("click",function(e){if(u(e.target,".need-share-button_link"))return e.preventDefault(),e.stopPropagation(),s.share[e.target.dataset.network](n),!1}),n.appendChild(r)}setTimeout(function(){t.classList.add("need-share-button-opened")},1)}}})}}();