function hookTemplate(){var r=DUOSHUO.templates.post;DUOSHUO.templates.post=function(o,e){var e=r(o,e),a=o.post.agent,o=o.post.author.user_id,s="";return o&&o==CONFIG.duoshuo.userId&&(s='<span class="duoshuo-ua-admin">'+CONFIG.duoshuo.author+"</span>"),e=a&&/^Mozilla/.test(a)?e.replace(/<\/div><p>/,s+getAgentInfo(a)+"</div><p>"):e}}function getAgentInfo(o){$.ua.set(o);var o="Unknown",e=$.ua,a=(s=window.navigator.userAgent,a=null!==s.match(/iPad/i),r=new RegExp(["iphone","android","phone","mobile","wap","netfront","x11","java","opera mobi","opera mini","ucweb","windows ce","symbian","symbianos","series","webos","sony","blackberry","dopod","nokia","samsung","palmsource","xda","pieplus","meizu","midp","cldc","motorola","foma","docomo","up.browser","up.link","blazer","helio","hosin","huawei","novarra","coolpad","webos","techfaith","palmsource","alcatel","amoi","ktouch","nexian","ericsson","philips","sagem","wellcom","bunjalloo","maui","smartphone","iemobile","spice","bird","zte-","longcos","pantech","gionee","portalmmm","jig browser","hiptop","benq","haier","^lct","320x320","240x320","176x220"].join("|"),"i"),!a&&s.match(r)?"<br><br>":'<span class="duoshuo-ua-separator"></span>'),s=e.os.name||o,r=e.os.version||o,n=e.browser.name||o,e=e.browser.version||o,o={os:{android:"android",linux:"linux",windows:"windows",ios:"apple","mac os":"apple",unknown:"desktop"},browser:{chrome:"chrome",chromium:"chrome",firefox:"firefox",opera:"opera",safari:"safari",ie:"internet-explorer",wechat:"wechat",qq:"qq",unknown:"globe"}},i=o.os[s.toLowerCase()],o=o.browser[function(){var o=n.toLowerCase();if(o.match(/WeChat/i))return"wechat";if(o.match(/QQBrowser/i))return"qq";return o}()];return a+'<span class="duoshuo-ua-platform duoshuo-ua-platform-'+s.toLowerCase()+'"><i class="fa fa-'+i+'"></i>'+s+" "+r+"</span>"+a+'<span class="duoshuo-ua-browser duoshuo-ua-browser-'+n.toLowerCase()+'"><i class="fa fa-'+o+'"></i>'+n+" "+e+"</span>"}"undefined"!=typeof DUOSHUO?hookTemplate():$("#duoshuo-script")[0].onload=hookTemplate;